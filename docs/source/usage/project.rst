.. _project:

===========================
プロジェクト
===========================

1つの構造情報ファイルに対し、計算の入力ファイル・出力ファイルをまとめて「プロジェクト」として管理します。

エクスプローラーから構造情報ファイルを開くと、新しいプロジェクトのタブが開きます。

.. image:: /img/project.svg

.. _engine:

計算エンジンの選択
=====================

左下のメニュー |projectmenuicon| から :guilabel:`Change calculator` をクリックします。使用できる計算エンジンが表示されますので、解析に使用したいものをクリックして選択してください。

.. |projectmenuicon| image:: /img/projectmenuicon.png

さらに、選択した計算エンジンの機能に応じ、どの入力ファイルを作成するか、右下のメニュー |editormenuicon| からエディターのモードを選びます。

.. |editormenuicon| image:: /img/editormenuicon.png


.. table::
   :widths: auto

   +--------------------------------+-------------------------------+-----------------------------------------------------------+
   | 計算エンジン                   | エディターのモード            |                                                           |
   +================================+===============================+===========================================================+
   | `Advance/PHASE`_               | （PHASE-Viewerが起動し、プロジェクトが開きます。）                                        |
   +--------------------------------+-------------------------------+-----------------------------------------------------------+
   | `Quantum ESPRESSO`_            | :guilabel:`Geometry`          | 原子構造・結晶構造・擬ポテンシャルの設定                  |
   |                                +-------------------------------+-----------------------------------------------------------+
   |                                | :guilabel:`SCF`               | 自己無撞着場計算                                          |
   |                                +-------------------------------+-----------------------------------------------------------+
   |                                | :guilabel:`Optimize`          | 第一原理構造最適化                                        |
   |                                +-------------------------------+-----------------------------------------------------------+
   |                                | :guilabel:`MD`                | 第一原理分子動力学法                                      |
   |                                +-------------------------------+-----------------------------------------------------------+
   |                                | :guilabel:`DOS`               | 状態密度計算                                              |
   |                                +-------------------------------+-----------------------------------------------------------+
   |                                | :guilabel:`Band`              | バンド計算                                                |
   |                                +-------------------------------+-----------------------------------------------------------+
   |                                | :guilabel:`TD-DFT`            | 時間依存密度汎関数法                                      |
   |                                +-------------------------------+-----------------------------------------------------------+
   |                                | :guilabel:`XAFS`              | X線吸収微細構造計算                                       |
   |                                +-------------------------------+-----------------------------------------------------------+
   |                                | :guilabel:`Phonon`            | フォノン計算                                              |
   |                                +-------------------------------+-----------------------------------------------------------+
   |                                | :guilabel:`Ph. Dispersion`    | フォノン状態密度・バンド計算                              |
   |                                +-------------------------------+-----------------------------------------------------------+
   |                                | :guilabel:`NEB`               | Nudged Elastic Band法                                     |
   +--------------------------------+-------------------------------+-----------------------------------------------------------+
   | `LAMMPS`_                      | :guilabel:`Geometry`          | 原子構造・結晶構造の設定                                  |
   |                                +-------------------------------+-----------------------------------------------------------+
   |                                | :guilabel:`Force-Field`       | 力場の設定                                                |
   |                                +-------------------------------+-----------------------------------------------------------+
   |                                | :guilabel:`Scheme`            | 計算過程の設定                                            |
   |                                +-------------------------------+-----------------------------------------------------------+
   |                                | :guilabel:`Option`            | 外場・外力等の設定                                        |
   |                                +-------------------------------+-----------------------------------------------------------+
   |                                | :guilabel:`User's`            | 任意コマンド追加、任意変数出力・グラフ化の設定            |
   +--------------------------------+-------------------------------+-----------------------------------------------------------+
   | `ThreeBodyTB`_                 | :guilabel:`Geometry`          | 原子構造・結晶構造の設定                                  |
   |                                +-------------------------------+-----------------------------------------------------------+
   |                                | :guilabel:`SCF`               | 自己無撞着場計算（汎用タイトバインディング法）            |
   |                                +-------------------------------+-----------------------------------------------------------+
   |                                | :guilabel:`Optimize`          | 構造最適化                                                |
   |                                +-------------------------------+-----------------------------------------------------------+
   |                                | :guilabel:`DOS`               | 状態密度計算                                              |
   |                                +-------------------------------+-----------------------------------------------------------+
   |                                | :guilabel:`Band`              | バンド計算                                                |
   +--------------------------------+-------------------------------+-----------------------------------------------------------+
   | Metropolis w/ NNP              | メトロポリス法による構造生成（\ `Advance/NeuralMD`_\ 連携機能）                           |
   +--------------------------------+-------------------------------------------------------------------------------------------+
   | SLHMC                          | 自己学習ハイブリッドモンテカルロ法による力場作成（\ `Advance/NeuralMD`_\ 連携機能）       |
   +--------------------------------+-------------------------------------------------------------------------------------------+


.. _`Advance/PHASE`: https://www.advancesoft.jp/products/nano/advance-phase/
.. _`Quantum ESPRESSO`: https://www.quantum-espresso.org/
.. _`LAMMPS`: https://www.lammps.org/
.. _`Advance/NeuralMD`: https://www.nanolabo.advancesoft.jp/neuralmd/
.. _`ThreeBodyTB`: https://pages.nist.gov/ThreeBodyTB.jl/

使用する計算エンジンとエディターのモードを選ぶと、それに応じた設定項目が画面右側のエディターパネルに表示されます。

.. _save:

プロジェクトの保存
==========================

新しいプロジェクトを開いた場合、そのままではまだ保存されていません。左下のメニュー |projectmenuicon| から :guilabel:`Save` をクリックし、保存場所とプロジェクト名を設定して保存してください。タブにプロジェクト名が表示されます。

保存していないプロジェクトで計算を実行しようとしたり、エディターで変更を加えたまま保存せずにタブを閉じようとしたりすると、保存するよう促されます。

.. note::

 Windowsで、Quantum ESPRESSOの計算をローカルで行う場合、プロジェクトの保存先はCドライブ内にする必要があります（Quantum ESPRESSOの仕様による）。

 この制限は、ジャンクションを使うことで回避できます。下記の例のようにコマンドを実行して設定することで、NanoLabo上でextフォルダに保存したデータが、実体としてはnanolaboDataフォルダに保存されます。

 また、Linuxでもシンボリックリンクを使うことで、\ :file:`.nanolabo`\ の外にあるフォルダを\ :file:`.nanolabo`\ 内にあるように扱うことができます。

 .. code-block:: console
     :caption: Windows

     mkdir D:\nanolaboData
     mklink /J C:\Users\ユーザー名\.nanolabo\ext D:\nanolaboData

 .. code-block:: console
     :caption: Linux

     mkdir /home/ユーザー名/nanolaboData
     ln -s /home/ユーザー名/nanolaboData /home/ユーザー名/.nanolabo/ext

.. _shortcut:

ショートカットキー一覧
==========================

.. table::
   :widths: auto

   +---------------------------------------+------------------------------------------------------------------------------------+
   | 操作                                  |                                                                                    |
   +=======================================+====================================================================================+
   | プロジェクト保存                      | :kbd:`Ctrl` + :kbd:`S`                                                             |
   +---------------------------------------+------------------------------------------------------------------------------------+
   | 戻る（左下の矢印ボタン）              | :kbd:`Ctrl` + |larr|                                                               |
   +---------------------------------------+------------------------------------------------------------------------------------+
   | スクリーンショット（画像保存）        | :kbd:`PrintScreen`                                                                 |
   +---------------------------------------+------------------------------------------------------------------------------------+

`*`:sup: macOSでは :kbd:`Ctrl` |rarr| :kbd:`command` と読み替えてください。

.. |larr| raw:: html

   &larr;

.. |rarr| raw:: html

   &rarr;
