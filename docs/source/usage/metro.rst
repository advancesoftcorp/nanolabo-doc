.. _metro:

==============================================
メトロポリス法
==============================================

元構造から、学習を行ったニューラルネットワークを使って、メトロポリス法による構造生成を行います。この構造を元に教師データを作り、ニューラルネットワークを再度学習させる（強化学習）ことで、より広いエネルギーの構造をカバーするニューラルネットワーク力場を作ることができます。

.. hint:: 元構造だけの状態ではメトロポリス法は使用できないので、最初はランダム構造を生成して教師データを作成してください。

.. _metrosetting:

設定画面
==============

既にニューラルネットワークの学習を行ったグランドプロジェクトからこの画面を開いた場合、ニューラルネットワークのデータが設定された状態になっています。

:guilabel:`Import Data of Neural Network Potential` ボタンが赤くなっている場合、ニューラルネットワークのデータが設定されていませんので、ボタンをクリックしてデータ（ :file:`sannp.data` 等）が含まれるフォルダを選択してください。

画面右側のパネルで、メトロポリス法の設定を行います。設定項目の詳細については、NeuralMDのドキュメントにある設定ファイルの説明 `sannp.metro <https://neuralmd-doc.readthedocs.io/ja/latest/usage/metro.html>`_ を参照してください。

原子の入れ替えのための空孔を設定したい場合は、 :guilabel:`Atoms` でElementをXに変更してください。

設定後、左下メニューの :guilabel:`Run` から計算を実行してください。

.. image:: /img/metro_setting.png

.. _metroresult:

結果画面
==============

実行後、タブに戻るとResult画面が表示されます。

:guilabel:`Movie` でメトロポリス法の過程を動画として確認できます。

.. image:: /img/metroresult.png
